CREATE DATEBASE IF NOT EXIST TAREA6;

USE TAREA6;

CREATE TABLE DEPARTAMENTO (
ID_DPTO INTEGER PRIMARY KEY, 
NOMBRE VARCHAR (92),
PLANTA INTEGER ,
NUM_OFICINAS INTEGER
);

INSERT INTO DEPARTAMENTO VALUES (1,'ADMINISTRACION)', 1,3);
INSERT INTO DEPARTAMENTO VALUES (2,'PRODUCCION)', 2,4);
INSERT INTO DEPARTAMENTO VALUES (3,'INGENIERIA)', 3,2);
INSERT INTO DEPARTAMENTO VALUES (4,'CALIDAD)', 4,1);

CREATE TABLE TRABAJADOR (
DNI VARCHAR (9) PRIMARY KEY,
CONTRASEÃ‘A INTEGER ,
NOMBRE VARCHAR (40),
FECHA_NACIMIENTO DATE NOT NULL,
ID_DPTO INTEGER NOT NULL,
JEFE VARCHAR (9),
FOTO VARCHAR(50),
CONSTRAINT FK_TRABAJADOR_DEPARTAMENTO FOREIGN KEY (ID_DPTO) REFERENCES DEPARTAMENTO(ID_DPTO)
);

INSERT INTO TRABAJADOR VALUES ('30240885H', 1234, 'Pepe MArtin Diaz', '06/15/1982', 1, NULL,NULL);
INSERT INTO TRABAJADOR VALUES ('25698754L', 2345, 'Maria Gutierrez Garcia', '08/10/1990', 2, NULL,NULL);
INSERT INTO TRABAJADOR VALUES ('12659874M', 3456, 'lola Rueda Montes', '10/03/1989', 3,NULL, NULL);
INSERT INTO TRABAJADOR VALUES ('26412563N', 4567, 'Antonio Perez Ruiz', '02/02/1994', 4,NULL,NULL);
INSERT INTO TRABAJADOR VALUES ('26548794D', 5678, 'Carlos Menendez Pelayo', '07/10/1973', 1, '26548794D', NULL);
INSERT INTO TRABAJADOR VALUES ('31256984F', 6789, 'Lucia Guerra Pelaez', '08/04/1974', 2, '31256984F', NULL);




CREATE TABLE NOMINA (
ID INTEGER PRIMARY KEY,
SALARIOBASE DECIMAL(6,2),
CALCULO_ACTIVIDADES DECIMAL (6,2),
SALARIOTOTAL DECIMAL(6,2),
DNI_TRAB VARCHAR(9),
ID_TAREA INTEGER,
CONSTRAINT FK_NOMINA_TRABAJADOR FOREIGN KEY (DNI_TRAB) REFERENCES TRABAJADOR(DNI),
CONSTRAINT FK_NOMINA_TAREA FOREIGN KEY (ID_TAREA) REFERENCES TAREA(ID_TAREA)
);

INSERT INTO NOMINA VALUES (1, 800.00, 0, 0, '30240885H',1);
INSERT INTO NOMINA VALUES (7, 800.00, 0, 0,'30240885H',1);
INSERT INTO NOMINA VALUES (13, 800.00, 0,0, '30240885H',1);
INSERT INTO NOMINA VALUES (2, 900.00, 0, 0,'25698754L',2);
INSERT INTO NOMINA VALUES (8, 900.00, 0, 0,'25698754L',2);
INSERT INTO NOMINA VALUES (14, 900.00, 0, 0,'25698754L',2);
INSERT INTO NOMINA VALUES (3, 700.00, 0, 0,'12659874M',3);
INSERT INTO NOMINA VALUES (9, 700.00, 0, 0,'12659874M',3);
INSERT INTO NOMINA VALUES (15, 700.00, 0,0, '12659874M',3);
INSERT INTO NOMINA VALUES (4, 1000.00, 0, 0,'26412563N',4);
INSERT INTO NOMINA VALUES (10, 1000.00, 0,0, '26412563N',4);
INSERT INTO NOMINA VALUES (16, 1000.00, 0,0, '26412563N',4);
INSERT INTO NOMINA VALUES (5, 850.00, 0,0, '31256984F',2);
INSERT INTO NOMINA VALUES (11, 850.00, 0,0, '31256984F',2);
INSERT INTO NOMINA VALUES (17, 850.00, 0,0, '31256984F',2);
INSERT INTO NOMINA VALUES (6, 950.00, 0,0, '26548794D',1);
INSERT INTO NOMINA VALUES (12, 950.00, 0,0. '26548794D',1);
INSERT INTO NOMINA VALUES (18, 8950.00, 0,0, '26548794D',1);



CREATE TABLE TAREA (
ID_TAREA INTEGER PRIMARY KEY,
NOMBRE VARCHAR (20)
);

INSERT INTO TAREA VALUES (1, 'ADMINISTRATIVA');
INSERT INTO TAREA VALUES (2, 'OPERATIVA');
INSERT INTO TAREA VALUES (3, 'TECNICA');
INSERT INTO TAREA VALUES (4, 'DOCUMENTAL');


CREATE TABLE ACTIVIDAD (
ID_ACT INTEGER PRIMARY KEY,
NOMBRE VARCHAR (20),
PRECIO DECIMAL (6,2),
TIPO_TAREA INTEGER,
CONSTRAINT FK_ACTIVIDAD_TAREA FOREIGN KEY (TIPO_TAREA) REFERENCES TAREA(ID_TAREA)
);

INSERT INTO ACTIVIDAD VALUES (1, 'facturacion', 250.00, 1);
INSERT INTO ACTIVIDAD VALUES (2, 'pedidos', 200, 1);
INSERT INTO ACTIVIDAD VALUES (3, 'albaranes', 150, 1);


INSERT INTO ACTIVIDAD VALUES (4, 'mecanizado', 300, 2);
INSERT INTO ACTIVIDAD VALUES (5, 'torneado', 350, 2);
INSERT INTO ACTIVIDAD VALUES (6, 'repaso', 280, 2);


INSERT INTO ACTIVIDAD VALUES (7, 'planos', 400, 3);
INSERT INTO ACTIVIDAD VALUES (8, 'programacion', 450, 3);
INSERT INTO ACTIVIDAD VALUES (9, 'industrializacion', 500, 3);

INSERT INTO ACTIVIDAD VALUES (10, 'informes', 330, 4);
INSERT INTO ACTIVIDAD VALUES (11, 'discrepancias', 420, 4);
INSERT INTO ACTIVIDAD VALUES (12, 'auditorias', 750, 4);






